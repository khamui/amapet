@for (answer of answers; track answer._id) {
  <div class="mb-2 mt-4">
    <span class="text-xs text-500 hover:text-700">{{ answer.ownerName }}</span
    ><span class="mx-2 text-xs text-500 hover:text-700">{{
      answer.created_at | dateAgo
    }}</span>
    @if (answer.modded_at) {
      <span class="mr-3 text-xs font-italic">(edited)</span>
    }
    @if (currentUserId === answer.ownerId) {
      <span class="text-xs">
        <button
          type="button"
          class="btn__link mx-1 btn--reset"
          (click)="toggleEditForm(answer)"
        >
          Edit
        </button>
        <button
          type="button"
          class="btn__link mx-1 btn--reset"
        >
          Delete
        </button>
      </span>
    }
  </div>
  <div class="flex mb-2">
    <p-divider layout="vertical"></p-divider>
    <div class="flex flex-column justify-content-between w-full">
      @if (answerInEditing?._id === answer?._id) {
        <div class="my-3">
          <ama-texteditor
            submitButtonText="Save"
            cancelButtonText="Cancel"
            [data]="answer"
            [initialValue]="answer.answerText"
            [editorHeightCss]="{ height: '4rem' }"
            (submit)="submitAnswerUpdate($event)"
            (cancel)="closeAnswerForm()"
          ></ama-texteditor>
        </div>}
      @else {
        <div class="text-sm font-bold" [innerHtml]="answer.answerText"></div>
      }
      <div class="mt-3">
        <p-toggleButton
          #subAnswerList
          [styleClass]="
            'mx-1 text-xs px-2 py-1' + (answer.totalSubAnswers <= 0 ? ' hidden' : '')
          "
          onIcon="pi pi-comments"
          offIcon="pi pi-comments"
          [disabled]="answer.totalSubAnswers <= 0"
          [onLabel]="answer.totalSubAnswers.toString()"
          [offLabel]="answer.totalSubAnswers.toString()"
          (onChange)="toggleSubAnswers(answer)"
        ></p-toggleButton>
        <p-toggleButton
          #subAnswerEditor
          [styleClass]="'mx-1 text-xs px-2 py-1' + (isLoggedIn ? '' : ' hidden')"
          onIcon="pi pi-angle-down"
          onIcon="pi pi-comment"
          offIcon="pi pi-comment"
        ></p-toggleButton>
      </div>
      @if (isLoggedIn && subAnswerEditor.checked) {
        <div class="my-3">
          <ama-texteditor
            [data]="answer"
            (submit)="submitAnswer($event)"
          ></ama-texteditor>
        </div>
      }
      @if (subAnswerList.checked) {
        <ama-answers [answers]="answers$ | async"></ama-answers>
      }
    </div>
  </div>
}
