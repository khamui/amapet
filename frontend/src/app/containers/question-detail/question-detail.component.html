<ng-container *ngIf="question">
  <p-panel>
    <ng-template pTemplate="header">
      <span class="text-xs text-bluegray-300">
        Posted by {{ question.ownerName }}
      </span>
      <span class="text-xs text-bluegray-500 mx-1 font-semibold">
        {{ question.created_at | dateAgo }}
      </span>
      <ng-container *ngIf="isOwner">
        <span class="text-xs">
          <button
            type="button"
            class="btn__link mx-1 btn--reset"
            (click)="handleEdit($event)"
          >
            Edit
          </button>
          <button
            type="button"
            class="btn__link mx-1 btn--reset"
            (click)="handleDelete($event)"
          >
            Delete
          </button>
        </span>
      </ng-container>
    </ng-template>
    <div class="flex jufstify-content-start">
      <div class="text-sm mr-1">
        {{ (question?.upvotes || 0) - (question?.downvotes || 0) }}
      </div>
      <p-divider layout="vertical"></p-divider>
      <div class="w-full">
        <div class="ml-1">
          <h4 class="m-0">{{ question.title }}</h4>
          <p [innerHtml]="question.body" class="text-left text-sm"></p>
        </div>
        <div class="text-sm my-5">
          <i class="pi pi-comments"></i>
          <span> tbd num of answers </span>
        </div>
        <div class="w-full mt-5 mb-3">
          <form [formGroup]="answerForm" (submit)="submitAnswer()">
            <p-editor
              formControlName="answerEditor"
              [style]="{ height: '8rem' }"
            >
              <ng-template pTemplate="header">
                <span class="ql-formats">
                  <button
                    type="button"
                    class="ql-bold"
                    aria-label="Bold"
                  ></button>
                  <button
                    type="button"
                    class="ql-italic"
                    aria-label="Italic"
                  ></button>
                  <button
                    type="button"
                    class="ql-underline"
                    aria-label="Underline"
                  ></button>
                  <button
                    type="button"
                    class="ql-strike"
                    aria-label="Strike-through"
                  ></button>
                  <button
                    type="button"
                    class="ql-code"
                    aria-label="Inline code"
                  ></button>
                  <button
                    type="button"
                    class="ql-list"
                    value="bullet"
                    aria-label="List"
                  ></button>
                  <button
                    type="button"
                    class="ql-link"
                    aria-label="Link"
                  ></button>
                </span>
              </ng-template>
            </p-editor>
            <div class="mb-4 mt-2">
              <p-button
                type="submit"
                size="small"
                severity="secondary"
                [outlined]="true"
                [loading]="loading"
                [disabled]="this.answerForm.controls['answerEditor'].value == ''"
                >Answer</p-button
              >
            </div>
          </form>
        </div>
      </div>
    </div>
    <div class="my-5">
      <ama-answers [answers]="answers"></ama-answers>
    </div>
  </p-panel>
</ng-container>
<p-confirmDialog [style]="{width: '50vw'}"></p-confirmDialog>
